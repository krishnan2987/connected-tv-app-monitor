<jumbotron>
    <h1>Product Monitor for Connected TV</h1>
</jumbotron>

<template for="tal-app-endpoints" brand="google" model="chrome">
    <h3>{{environment-name}}</h3>
    <status-button data-url="{{environment-url}}{{app-id}}/?brand={{brand}}&model={{model}}">Index</status-button>
    <status-button data-url="{{environment-url}}{{app-id}}/ait/launch?brand={{brand}}&model={{model}}">AIT</status-button>
    <status-button data-url="{{environment-url}}{{app-id}}/ait/issupported?brand={{brand}}&model={{model}}">isSupported</status-button>
</template>

<div class="row">
    <div class="col-md-4">
        <h2>Red Button+</h2>
        <tal-app-endpoints environment-name="Live" environment-url="http://www.bbc.co.uk/" app-id="redbuttonhtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Stage" environment-url="http://www.stage.bbc.co.uk/" app-id="redbuttonhtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Test" environment-url="http://www.test.bbc.co.uk/" app-id="redbuttonhtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Dev CI" environment-url="http://10.10.32.46/" app-id="redbuttonhtml"></tal-app-endpoints>
    </div>

    <div class="col-md-4">
        <h2>Music Events HTML</h2>
        <tal-app-endpoints environment-name="Live" environment-url="http://www.bbc.co.uk/" app-id="musiceventshtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Stage" environment-url="http://www.stage.bbc.co.uk/" app-id="musiceventshtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Test" environment-url="http://www.test.bbc.co.uk/" app-id="musiceventshtml"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Dev CI" environment-url="http://10.10.32.46/" app-id="musiceventshtml"></tal-app-endpoints>
    </div>

    <div class="col-md-4">
        <h2>Sport HTML</h2>
        <tal-app-endpoints environment-name="Live" environment-url="http://www.bbc.co.uk/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Stage" environment-url="http://www.stage.bbc.co.uk/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Test" environment-url="http://www.test.bbc.co.uk/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Hogwarts" environment-url="http://10.10.32.8/" app-id="sprtiptvjs"></tal-app-endpoints>
    </div>
</div>


<div class="row">
    <div class="col-md-4">
        <h2>News on TAL</h2>
        <tal-app-endpoints environment-name="Live" environment-url="http://www.bbc.co.uk/" app-id="newsontal"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Stage" environment-url="http://www.stage.bbc.co.uk/" app-id="newsontal"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Test" environment-url="http://www.test.bbc.co.uk/" app-id="newsontal"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Dev CI" environment-url="http://10.10.32.46/" app-id="newsontal"></tal-app-endpoints>
    </div>

    <div class="col-md-4">
        <h2>Sport HTML Hogwarts</h2>
        <tal-app-endpoints environment-name="Gryffindor" environment-url="http://10.10.32.24/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Slytherin" environment-url="http://10.10.32.27/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Hufflepuff" environment-url="http://10.10.32.28/" app-id="sprtiptvjs"></tal-app-endpoints>
        <tal-app-endpoints environment-name="Ravenclaw" environment-url="http://10.10.32.42/" app-id="sprtiptvjs"></tal-app-endpoints>
    </div>
</div>


<h2>http://tal-launcher.bbc.co.uk/</h2>
<status-button glyph-icon="flag" data-url="http://tal-launcher.int.tools.bbc.co.uk/config" data-contains="int">TAL Launcher Int Config</status-button>

<status-button glyph-icon="flag" data-url="http://tal-launcher.test.tools.bbc.co.uk/config" data-contains="test">TAL Launcher Test Config</status-button>

<status-button glyph-icon="flag" data-url="http://tal-launcher.tools.bbc.co.uk/config" data-contains="live">TAL Launcher Live Config</status-button>


<h2>http://www.bbc.co.uk/tal-launcher/</h2>

<status-button glyph-icon="flag" data-url="http://www.int.bbc.co.uk/tal-launcher/config" data-contains="int">TAL Launcher Int Config</status-button>

<status-button glyph-icon="flag" data-url="http://www.test.bbc.co.uk/tal-launcher/config" data-contains="test">TAL Launcher Test Config</status-button>

<status-button glyph-icon="flag" data-url="http://www.bbc.co.uk/tal-launcher/config" data-contains="live">TAL Launcher Live Config</status-button>

<h2>Jenkins Jobs</h2>

<jenkins-jobs data-source-url="/api/connectedTvCloudJenkins" refresh-time="10"></jenkins-jobs>

<template for="jenkins-jobs">
  {{#each jobs}}
    <a href="{{url}}">
      <button class="btn btn-{{alertType}}">{{name}} : {{color}}</button>
    </a>
  {{/each}}
</template>

<style for="jenkins-jobs">
jenkins-jobs > a {
  margin: 5px 0;
  display: inline-block;
  text-decoration: none;
}
</style>

<script type="text/javascript" for="jenkins-jobs">
  $(function() {
    var JenkinsJobComponent = Component.configure('jenkins-jobs');

    JenkinsJobComponent.prototype.selectAlertType = function(jenkinsColor) {
      return ({
        "red": 'danger',
        "blue": 'success',
        "blue_anime": 'info'
      })[jenkinsColor] || 'danger';
    }

    JenkinsJobComponent.on('preRenderStep', function(instance) {
      try {
        var list = instance.data.jobs;
        if (list) {
          for (key in list) {
            var item = list[key];
            item.alertType = instance.selectAlertType(item.color);
            item.url = instance.data.service + '/job/' + item.name;
          }
        }
      }
      catch(e) {
        // do nothing
      }
    });
  });
</script>
